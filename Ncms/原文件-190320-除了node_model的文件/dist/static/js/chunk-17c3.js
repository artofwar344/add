(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-17c3"],{"0i8v":function(t,e,n){"use strict";n.r(e);var a=n("YgAi").a,o=(n("8zFL"),n("KHd+")),i=Object(o.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("router-view"),t._v(" "),t.contentPath?n("el-row",{staticClass:"tableTop",attrs:{type:"flex",justify:"center"}},[n("el-col",{staticClass:"management",attrs:{span:8,offset:2}},[t._v("首页内容--"+t._s(t.indexName)+"--管理")]),t._v(" "),n("el-col",{attrs:{span:4}},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.goaddContent()}}},[t._v("新建内容")])],1)],1):t._e(),t._v(" "),t.contentPath?n("el-row",[n("el-col",{staticClass:"radiostyle"})],1):t._e(),t._v(" "),t.contentPath?n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.CLoading,expression:"CLoading"}],staticStyle:{width:"100%",height:"100%"},attrs:{data:t.userData,stripe:""}},[n("el-table-column",{attrs:{prop:"id",label:"内容ID",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{domProps:{textContent:t._s(e.row.attrId)}})]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"modelStyleId",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.title))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"sort",label:"排序",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{staticStyle:{"text-align":"center"},attrs:{size:"small",type:"number"},on:{change:function(n){t.sortChange(e.row)}},model:{value:e.row.sort,callback:function(n){t.$set(e.row,"sort",n)},expression:"scope.row.sort"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"shelvesState",label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{class:1==e.row.shelvesState?"blue22":"blue11",domProps:{textContent:t._s(1==e.row.shelvesState?"下架":"上架")}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"首页内容管理",width:"380"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(n){t.changeManagementName(e.row)}}},[t._v(t._s("改名"))]),t._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){t.goContentEdit(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"small",type:1==e.row.shelvesState?"success":"info"},domProps:{textContent:t._s(1==e.row.shelvesState?"上架":"下架")},on:{click:function(n){t.changeState(e.row)}}}),t._v(" "),n("el-button",{attrs:{"scope.row.model":" this.model",size:"small",disabled:2==e.row.shelvesState,type:"danger"},on:{click:function(n){t.deleteDATA(e.row)}}},[t._v("删除")])]}}])})],1):t._e(),t._v(" "),t.contentPath?n("el-row",{staticClass:"managContentText"}):t._e(),t._v(" "),"/administer/management/indexContent"==this.$route.path||"/administer/vipmanagement/indexContent"==this.$route.path?n("div",{staticClass:"gobackmodel"},[n("el-button",{staticClass:"gobackmodelbu",on:{click:t.goback}},[t._v("返回")]),t._v(" "),t.contentPath?n("pagination",{attrs:{pageData:t.pageData},on:{pageChange:t.changePage}}):t._e()],1):t._e()],1)},[],!1,null,null,null);i.options.__file="index.vue";e.default=i.exports},"8zFL":function(t,e,n){"use strict";var a=n("wtjH");n.n(a).a},YgAi:function(module,__webpack_exports__,__webpack_require__){"use strict";var _utils_auth__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("X4fA");__webpack_exports__.a={data:function(){return{list:null,listLoading:!0,subject:"",userData:[],CLoading:!0,indexName:"",showMessage:"",postArgument:"",others:"",indexType:"",radioVal:"",gonewPatha:"",showDelete:"",pageData:{page:1,total:100,size:30},model:!1}},beforeCreate:function(){this.showDelete=this.$route.query.modeltype,14==this.showDelete&&(this.model=!0)},created:function(){this.modelData(),this.gonewPath,this.modelVal()},updated:function(){},watch:{showDelete:function(t){this.showDelete=t},$route:function(t){this.modelData()}},computed:{contentPath:function(){return"/administer/management/indexContent"==this.$route.path||"/administer/vipmanagement/indexContent"==this.$route.path},gonewPath:function(){return"/administer/management/indexContent"==this.$route.path?(14!=this.$route.query.modeltype?this.gonewPatha="/administer/management/indexAddContent":this.gonewPatha="/administer/management/indexContent/advertisingadd",this.gonewPatha):"/administer/vipmanagement/indexContent"==this.$route.path?(14!=this.$route.query.modeltype?this.gonewPatha="/administer/vipmanagement/indexAddContent":this.gonewPatha="/administer/vipmanagement/indexContent/advertisingadd",this.gonewPatha):void 0}},mounted:function(){},methods:{modelData:function(){var t=this;"/administer/management/indexContent"==this.$route.path?this.indexType="1":this.indexType="2",this.indexType?this.indexType:this.indexType=2,1==this.contentPath&&(this.$http.get("api/portal/model/modelContentList",{params:{pgNo:this.pageData.page,rowNum:30,modelId:this.$route.query.indexId}}).then(function(e){t.pageData={page:e.data.model.currPage,size:30,total:e.data.model.totalRowCount},t.CLoading=!1,t.userData=e.data.model.list}),this.indexName=this.$route.query.indexName),this.listLoading=!0},searchManagement:function(){this.modelData()},goaddContent:function(){this.$router.push({path:this.gonewPatha,query:this.$route.query})},goContentEdit:function goContentEdit(val){var queryX=this.$route.query,value=14!=this.$route.query.modeltype?val.id:val.attrId,page=this.pageData.page;eval(" queryX.contentEdit ='"+value+"'"),eval(" queryX.page='"+page+"'"),14!=this.$route.query.modeltype?this.$router.push({path:this.$route.path+"/contentEdit",query:queryX}):this.$router.push({path:this.$route.path+"/advertisingedit",query:queryX})},goback:function(){history.go(-1)},radioChange:function(t){},sortChange:function(t){this.showMessage="是否改变内容的排序?",this.postArgument="api/portal/model/"+this.$route.query.indexId+"/content/"+this.indexType,this.others={id:t.id,sort:Number(t.sort)},this.packagingFn(this.showMessage,this.postArgument,this.others)},changeState:function(t){this.showMessage="是否改变内容的上下架状态?",this.postArgument="api/portal/model/"+this.$route.query.indexId+"/content/"+this.indexType,this.others={id:t.id,shelvesState:"1"==t.shelvesState?2:1},this.packagingFn(this.showMessage,this.postArgument,this.others)},packagingFn:function(t,e,n){var a=this;this.$confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.put(e,n).then(function(t){!0===t.data.success&&(a.$message({type:"success",message:"成功!"}),a.modelData())})}).catch(function(){a.$message({type:"info",message:"取消"})})},changeManagementName:function(t){var e=this;this.$prompt("改内容名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"error"}).then(function(n){var a=n.value;e.$http.put("api/portal/model/"+e.$route.query.indexId+"/content/"+e.indexType,{id:t.id,title:a}).then(function(t){!0===t.data.success&&(e.$message({type:"success",message:"成功!"}),e.modelData())})}).catch(function(){e.$message({type:"info",message:"取消更改"})})},changePage:function(t){this.pageData=t,this.modelData()},modelVal:function(){14==this.$route.query.modeltype&&(this.showDelete=14)},deleteDATA:function(t){var e=this;14==this.$route.query.modeltype?this.$confirm("是否确认删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.delete("api/portal/centerAdvert/"+t.attrId,{id:t.attrId}).then(function(n){e.$http.delete("api/portal/model/"+e.$route.query.indexId+"/content/"+t.id,{id:e.$route.query.indexId,cid:t.id}).then(function(t){e.modelData()})})}).catch(function(){e.$message({type:"info",message:"取消"})}):this.$confirm("是否确认删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.delete("api/portal/model/"+e.$route.query.indexId+"/content/"+t.id,{id:e.$route.query.indexId,cid:t.id}).then(function(t){e.modelData()})}).catch(function(){e.$message({type:"info",message:"取消"})})}}}},wtjH:function(t,e,n){}}]);