(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1084"],{"19aB":function(t,e,s){},Zfda:function(t,e,s){"use strict";s.r(e);var i={data:function(){return{list:null,listLoading:!0,advertisingData:[],indexattrData:{},indexType:"",thatPage:1,EditAdvertisingData:"",skipText:""}},created:function(){this.getadvertisingData()},updated:function(){},computed:{adversingEdit:function(){return this.indexType!=this.indexType&&this.getadvertisingData(),"/administer/management/advertising"==this.$route.path||"/administer/vipmanagement/advertising"==this.$route.path}},methods:{getadvertisingData:function(){var t=this;"/administer/management/advertising"==this.$route.path?this.indexType="2":this.indexType="1",this.indexType?this.indexType:this.indexType=2,this.$http.get("api/portal/centerAdvert",{params:{pgNo:this.thatPage,rowNum:10,modelId:this.indexType,modeType:this.indexType}}).then(function(e){t.thatPage=e.data.model.currPage,t.advertisingData=e.data.model.list,t.indexattrData=t.advertisingData[0],t.dataMap(t.advertisingData)}),this.indexName=this.$route.query.indexName,this.listLoading=!0},dataMap:function(t){var e=this;t.map(function(t){switch(e.$set(t,"indexType",e.indexType),Number(t.skipType)){case 13:e.$set(t,"skipText","周年活动");break;case 12:e.$set(t,"skipText","日荐或组图");break;case 10:e.$set(t,"skipText","杂志");break;case 9:e.$set(t,"skipText"," 快听");break;case 7:e.$set(t,"skipText","快听专辑");break;case 8:e.$set(t,"skipText","小课");break;case 6:e.$set(t,"skipText","个人主页");break;case 4:e.$set(t,"skipText","专栏");break;case 2:e.$set(t,"skipText","专题");break;case 1:e.$set(t,"skipText","正文");break;case 0:e.$set(t,"skipText","H5");break;default:e.$set(t,"skipText","H5")}})},goadversingpath:function(){},goaddAdvert:function(t){t.id?(this.EditAdvertisingData=t,this.$router.push({path:this.$route.path+"/EditAdvertising",query:{indexId:this.$route.query.indexId,adverst:t.id}})):this.$router.push({path:this.$route.path+"/AddAdvertising"})},fn:function(){history.go(-1)},getOption:function(){var t=this;this.$http.get("api/portal/model/type").then(function(e){!0===e.data.success&&(t.options=e.data.model)})},openImg:function(t){t.imageUrl?this.$alert('<div style="display:inline-block;width:200px;height:350px;background:url('+t.imageUrl+');background-size:cover;"></div>',"图片样式",{dangerouslyUseHTMLString:!0}):this.$message({type:"info",message:"没有图片"})},sortChange:function(t){this.showMessage="是否改变广告的排序?",this.postArgument="api/portal/centerAdvert/"+t.id,this.others={id:t.id,skipType:t.skipType,contentType:t.contentType,sort:t.sort},this.packagingFn(this.showMessage,this.postArgument,this.others)},changeState:function(t){this.showMessage="是否改变广告的上下架状态?",this.postArgument="api/portal/centerAdvert/"+t.id,this.others={id:t.id,skipType:t.skipType,contentType:t.contentType,shelvesState:2==t.shelvesState?1:2},this.packagingFn(this.showMessage,this.postArgument,this.others)},packagingFn:function(t,e,s){var i=this;this.$confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$http.put(e,s).then(function(t){!0===t.data.success&&(i.$message({type:"success",message:"成功!"}),i.getadvertisingData())})}).catch(function(){i.$message({type:"info",message:"取消"})})},prompta:function(t){var e=this;this.$alert("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"error"}).then(function(){e.$http.delete("api/portal/centerAdvert/"+e.$route.query.indexId,{id:t.id}).then(function(t){!0===t.data.success&&e.$message({type:"success",message:"删除成功!"})})}).catch(function(){e.$message({type:"info",message:"取消更改"})})}}},a=(s("vC6w"),s("KHd+")),n=Object(a.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container"},[s("router-view"),t._v(" "),s("el-row",[s("el-col",{staticClass:"goaddAdvert",attrs:{offset:16}}),t._v(" "),s("el-col",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.advertisingData,stripe:""}},[s("el-table-column",{attrs:{prop:"name",label:"标题",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{domProps:{textContent:t._s(e.row.name)}})]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"modelStyleId",label:"图片",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{domProps:{innerHTML:t._s("<div style=display:inline-block;width:60px;height:60px;background:url("+e.row.imageUrl+");background-size:cover;  ></div>")},on:{click:function(s){t.openImg(e.row)}}})]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{directives:[{name:"show",rawName:"v-show",value:e.row.skipText,expression:"scope.row.skipText"}],domProps:{textContent:t._s(e.row.skipText)}})]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"sort",label:"排序"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-input",{staticStyle:{"text-align":"center"},attrs:{size:"small",type:"number"},on:{change:function(s){t.sortChange(e.row)}},model:{value:e.row.sort,callback:function(s){t.$set(e.row,"sort",s)},expression:"scope.row.sort"}})]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"shelvesState",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(2==e.row.shelvesState?"上架":"下架"))]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"管理",width:"320"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"small"},on:{click:function(s){t.changeState(e.row)}}},[t._v(t._s(2==e.row.shelvesState?"下架":"上架"))]),t._v(" "),s("el-button",{attrs:{size:"small"},on:{click:function(s){t.prompta(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)],1)},[],!1,null,null,null);n.options.__file="index.vue";e.default=n.exports},vC6w:function(t,e,s){"use strict";var i=s("19aB");s.n(i).a}}]);