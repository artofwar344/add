(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8a8c"],{"F/nf":function(e,t,a){"use strict";a.r(t);var s={data:function(){return{list:null,listLoading:!0,MLoading:!0,userFlage:!1,subject:"",modPrice:"",dataspath:"",pageData:{page:1,total:100,size:10},userData:[],statusVal:0,options:[{value:0,label:"全部"},{value:2,label:"上架"},{value:1,label:"下架"}],showMessage:0,postArgument:"",others:"",indexType:"",indexTypechange:"",indexMessage:"创建首页模块"}},created:function(){this.UserInfoToggle()>=2&&(this.userFlage=!0),this.fetchData()},computed:{pathView:function(){return"/administer/management"==this.$route.path?this.indexType=2:this.indexType=1,this.indexTypechange!=this.indexType&&(this.pageData.page=1,this.fetchData()),"/administer/management"==this.$route.path||"/administer/vipmanagement"==this.$route.path}},methods:{fetchData:function(){var e=this;"/administer/management"==this.$route.path?this.indexType=2:this.indexType=1,this.indexTypechange=this.indexType,this.$http.get("api/portal/model/modelList",{params:{type:this.indexType,name:this.subject,shelvesState:Number(this.statusVal),pgNo:this.pageData.page,rowNum:30}}).then(function(t){e.pageData={page:t.data.model.currPage,size:t.data.model.rowsPerPage,total:t.data.model.totalRowCount},e.MLoading=!1,e.userData=t.data.model.list}),this.listLoading=!0},searchManagement:function(){this.fetchData()},goindexContent:function(e){this.$router.push({path:this.$route.path+"/indexContent",query:{indexId:e.id,modeltype:e.modelTypeId,indexName:e.name}})},sortChange:function(e){this.showMessage="是否改变首页模块的排序?",this.postArgument="api/portal/model/modelSort/"+e.id+"/"+e.sort,this.others={modelId:e.id,sort:Number(e.sort)},this.packagingFn(this.showMessage,this.postArgument,this.others)},changeState:function(e){this.showMessage="是否改变模块的上下架状态?";var t=2==e.shelvesState?1:2;this.postArgument="api/portal/model/shelveOrUnshelve/"+e.id+"/"+t,this.others={modelId:e.id,shelvesState:2==e.shelvesState?1:2},this.packagingFn(this.showMessage,this.postArgument,this.others)},packagingFn:function(e,t,a){var s=this;this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.$http.put(t,a).then(function(e){1==e.data.success&&(s.$message({type:"success",message:"成功!"}),s.fetchData())})}).catch(function(){s.$message({type:"info",message:"取消"})})},prompta:function(e){var t=this;this.$prompt("改模块名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"error"}).then(function(a){var s=a.value;t.$http.put("api/portal/model/udateModelName",{id:e.id,name:s}).then(function(e){1==e.data.success&&(t.$message({type:"success",message:"成功!"}),t.fetchData())})}).catch(function(){t.$message({type:"info",message:"取消更改"})})},createIndexModel:function(){var e=this;2==this.indexType?this.indexMessage="创建首页模块":this.indexMessage="创建VIP首页模块",this.$prompt(this.indexMessage,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"error"}).then(function(t){var a=t.value;e.$http.put("api/portal/model/addModel",{type:e.indexType,name:a,modelTypeId:3}).then(function(t){!0===t.data.success&&(e.fetchData(),e.$message({type:"success",message:"成功!"}))})}).catch(function(){e.$message({type:"info",message:"取消更改"})})},changePage:function(e){this.pageData=e,this.fetchData()},openImg:function(e){e.modelStyleUrl?this.$alert('<div style="display:inline-block;width:260px;height:360px;background:url('+e.modelStyleUrl+');background-size:cover;"></div>',"图片样式",{dangerouslyUseHTMLString:!0}):this.$message({type:"info",message:"没有图片"})}}},n=(a("cghX"),a("KHd+")),o=Object(n.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.userFlage,expression:"userFlage"}],staticClass:"app-container"},[a("router-view"),e._v(" "),e.pathView?a("el-row",{staticClass:"tableTop managcolTop",attrs:{type:"flex",justify:"end",gutter:1}},[a("el-col",{staticClass:"managtableTop",attrs:{span:2}},[e._v("模块名")]),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[a("el-input",{attrs:{size:"small"},model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}})],1),e._v(" "),a("el-col",{staticClass:"managtableTop",attrs:{span:2}},[e._v("状态")]),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[a("el-select",{attrs:{placeholder:"全部",size:"small"},model:{value:e.statusVal,callback:function(t){e.statusVal=t},expression:"statusVal"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:e.searchManagement}},[e._v("搜索")])],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.createIndexModel()}}},[e._v("新建模块")])],1)],1):e._e(),e._v(" "),e.pathView?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.MLoading,expression:"MLoading"}],staticStyle:{width:"100%",height:"100%"},attrs:{data:e.userData,stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"模块"},scopedSlots:e._u([{key:"default",fn:function(t){return[14==t.row.modelTypeId?a("span",{staticClass:"Span-blue",domProps:{textContent:e._s(t.row.name)}}):a("span",{domProps:{textContent:e._s(t.row.name)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"modelStyleUrl",label:"样式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{domProps:{innerHTML:e._s("<div style=display:inline-block;width:60px;height:60px;background:url("+t.row.modelStyleUrl+");background-size:cover;  ></div>")},on:{click:function(a){e.openImg(t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"shelvesState",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:1==t.row.shelvesState?"blue22":"blue11",domProps:{textContent:e._s(1==t.row.shelvesState?"下架":"上架")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{"text-align":"center"},attrs:{type:"number",size:"small"},nativeOn:{change:function(a){e.sortChange(t.row)}},model:{value:t.row.sort,callback:function(a){e.$set(t.row,"sort",a)},expression:"scope.row.sort"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"模块管理",width:"380"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:14==t.row.modelTypeId,size:"small",type:"warning"},on:{click:function(a){e.prompta(t.row)}}},[e._v("改名")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.goindexContent(t.row)}}},[e._v("内容管理")]),e._v(" "),a("el-button",{attrs:{size:"small",type:1==t.row.shelvesState?"success":"info"},domProps:{textContent:e._s(1==t.row.shelvesState?"上架":"下架")},on:{click:function(a){e.changeState(t.row)}}})]}}])})],1):e._e(),e._v(" "),a("div",{staticStyle:{height:"40px",width:"100%"}}),e._v(" "),e.pathView?a("pagination",{attrs:{pageData:e.pageData},on:{pageChange:e.changePage}}):e._e()],1)},[],!1,null,null,null);o.options.__file="index.vue";t.default=o.exports},cghX:function(e,t,a){"use strict";var s=a("yajI");a.n(s).a},yajI:function(e,t,a){}}]);