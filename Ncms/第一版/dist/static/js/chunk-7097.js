(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7097"],{"1RFM":function(e,t,a){"use strict";a.r(t);a("Kw5r");var i={data:function(){return{name:"addsubject",list:null,listLoading:!0,subject:{name:"专题模块  :",subjectName:"专题名",imgName:"图片",particular:"简介",fileList:[]},addModel:{name:"",smallImage:"",imageUrl:"",bigImage:"",description:""},modelsimg:{width:400,height:400},modelnimg:{width:750,height:250},modelbimg:{width:750,height:350},smallImage:"",management:{name:"新建模块",subject:"模块名",subjectVal:"类型",managementType:"",managementName:""},options:"",type:"",fileList:[]}},created:function(){this.getOption(),this.$route.query.mid&&this.getModel(),this.fnmodelcrated()},updated:function(){},computed:{modelEdit:function(){return"/administer/vipmanagement/edit"==this.$route.path||"/administer/management/edit"==this.$route.path}},methods:{emitChange1:function(e){this.addModel.smallImage=e},emitChange2:function(e){this.addModel.imageUrl=e},emitChange3:function(e){this.addModel.bigImage=e},getModel:function(){var e=this;this.$http.get("api/portal/theme",{params:{pgNo:this.$route.query.page,rowNum:30,name:""}}).then(function(t){t.data.model.list instanceof Array?t.data.model.list.map(function(t){e.$route.query.mid==t.theme.id&&(e.addModel=t.theme)}):e.addModel={}})},gobackfn:function(){history.go(-1)},getOption:function(){var e=this;this.$http.get("api/portal/model/style").then(function(t){!0===t.data.success&&(e.options=t.data.model)}),this.listLoading=!0},managementSub:function(){var e=this,t={name:this.addModel.name,smallImage:this.addModel.smallImage,imageUrl:this.addModel.imageUrl,bigImage:this.addModel.bigImage,description:this.addModel.description},a=this.addModel.description.length;console.log(a,"length");var i=a<=350;this.addModel.name&&i?this.$confirm("是否确认保存","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"error"}).then(function(){"/administer/subject/index/addmodel"==e.$route.path?e.$http.post("api/portal/theme",t).then(function(t){1==t.data.success&&(e.$router.push({path:"/administer/subject/index"}),e.$message({type:"success",message:"成功!"}))}):"/administer/subject/index/editmodel"==e.$route.path&&(t.id=e.$route.query.mid,e.$http.put("api/portal/theme/"+e.$route.query.mid,t).then(function(t){1==t.data.success&&(e.$router.push({path:"/administer/subject/index"}),e.$message({type:"success",message:"成功!"}))}))}):this.$message({type:"info",message:"请检查一下专题的名字或 简介文字的数量"})},fnmodelcrated:function(){this.$http.get("api/portal/oss/token").then(function(e){var t=e.body.model;new OSS.Wrapper({region:t.region,accessKeyId:t.AccessKeyId,accessKeySecret:t.AccessKeySecret,bucket:t.bucket,stsToken:t.StsToken})})}}},n=(a("wpw8"),a("KHd+")),d=Object(n.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("h3",[e._v(e._s(e.addModel.name?e.subject.name+e.addModel.name:e.subject.name))])]),e._v(" "),a("el-form-item",{staticClass:"subjectNames",attrs:{label:e.subject.subjectName}},[a("el-input",{model:{value:e.addModel.name,callback:function(t){e.$set(e.addModel,"name",t)},expression:"addModel.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.subject.imgName}},[a("upload-one",{attrs:{addModel:e.addModel,modelsimg:e.modelsimg},on:{emitChange1:e.emitChange1}}),e._v(" "),a("upload-tow",{attrs:{addModel:e.addModel,modelnimg:e.modelnimg},on:{emitChange2:e.emitChange2}}),e._v(" "),a("div",{staticStyle:{display:"inline-block",width:"30%"}},[a("upload-tree",{attrs:{addModel:e.addModel,modelbimg:e.modelbimg},on:{emitChange3:e.emitChange3}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.subject.particular}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6}},model:{value:e.addModel.description,callback:function(t){e.$set(e.addModel,"description",t)},expression:"addModel.description"}}),e._v(" "),a("span",{staticStyle:{display:"inline-block",float:"right","font-size":"14px",color:"#606266"}},[e._v("专题简介文字限300个")])],1),e._v(" "),a("el-form-item",{staticClass:"addmodeltext"},[a("el-button",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.gobackfn()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{href:"javascript:void(0);"},on:{click:e.managementSub}},[e._v("保存")])],1)],1)],1)},[],!1,null,"53ec9348",null);d.options.__file="index.vue";t.default=d.exports},Y5Tm:function(e,t,a){},wpw8:function(e,t,a){"use strict";var i=a("Y5Tm");a.n(i).a}}]);